// Generated by CoffeeScript 1.3.3
(function() {

  require.config({
    paths: {
      jquery: 'libs/jquery/jquery-1.7.1',
      text: 'libs/require/require-text',
      domReady: 'libs/require/domReady',
      order: 'libs/require/order',
      bootstrap: 'libs/bootstrap/bootstrap',
      underscore: 'libs/backbone/underscore',
      backbone: 'libs/backbone/backbone',
      localstorage: 'libs/backbone/localstorage'
    }
  });

  require(['jquery', 'backbone', 'views/popup', 'libs/iphone-style-checkboxes'], function($, Backbone, PopupView) {
    return $(function() {
      var $onOffBox, pluginEnabled;
      this.view = new PopupView;
      $('#wrapper').append(this.view.render().el);
      pluginEnabled = window.localStorage.getItem('pluginEnabled') === 'true';
      if (pluginEnabled) {
        $(':checkbox').prop('checked', "checked");
      }
      $onOffBox = $(':checkbox').iphoneStyle({
        onChange: function(elem, value) {
          var result;
          window.localStorage.setItem('pluginEnabled', value.toString());
          result = value.toString() === 'true';
          window.FactsUtils.sendResponseToTabs(result);
          return window.FactsUtils.updateBadge(result);
        }
      });
      return $('#feedback').click(function() {
        return window.FactsUtils.sendEmail('draco@dracoli.com', 'Awesome Facts Feedback');
      });
    });
  });

}).call(this);
