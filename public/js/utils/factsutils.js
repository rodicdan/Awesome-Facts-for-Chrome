// Generated by CoffeeScript 1.3.3
(function() {
  var FactsUtils;

  FactsUtils = (function() {

    function FactsUtils() {}

    FactsUtils.prototype.sendResponseToTabs = function(value) {
      return chrome.windows.getAll({
        "populate": true
      }, function(windows) {
        var tab, window, _i, _len, _results;
        _results = [];
        for (_i = 0, _len = windows.length; _i < _len; _i++) {
          window = windows[_i];
          _results.push((function() {
            var _j, _len1, _ref, _results1;
            _ref = window.tabs;
            _results1 = [];
            for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {
              tab = _ref[_j];
              _results1.push(chrome.tabs.sendRequest(tab.id, {
                action: 'pluginChanged',
                value: value
              }, function(response) {}));
            }
            return _results1;
          })());
        }
        return _results;
      });
    };

    FactsUtils.prototype.updateBadge = function(value) {
      if (value === true) {
        chrome.browserAction.setBadgeBackgroundColor({
          color: '#4E970A'
        });
        return chrome.browserAction.setBadgeText({
          text: 'on'
        });
      } else {
        chrome.browserAction.setBadgeBackgroundColor({
          color: '#9C1A1A'
        });
        return chrome.browserAction.setBadgeText({
          text: 'off'
        });
      }
    };

    FactsUtils.prototype.sendEmail = function(email, subject, body) {
      var action_url;
      action_url = "mailto:" + email + "?";
      if (subject.length > 0) {
        action_url += "subject=" + (encodeURIComponent(subject)) + "&";
      }
      if ((body != null) && body.length > 0) {
        action_url += "body=" + (encodeURIComponent(body));
      }
      return chrome.windows.create({
        url: action_url,
        type: 'popup'
      });
    };

    return FactsUtils;

  })();

  window.FactsUtils = new FactsUtils();

}).call(this);
